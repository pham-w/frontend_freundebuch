<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Mein Freundebuch</title>

    <style>
        :root{
            --bg:#e9eef5; --paper:#fffdf8; --ink:#1a1a1a; --muted:#6b7280;
            --leather1:#111827; --leather2:#1f2937; --accent:#f59e0b;
            --ribbon:#dc2626; --elastic:#0ea5e9;
        }

        *{box-sizing:border-box}
        body{margin:0;background:var(--bg);color:var(--ink);
            font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

        header{padding:18px 16px;text-align:center}
        header h1{margin:0;font-size:20px;letter-spacing:.3px}

        .stage{
            display:flex;flex-direction:column;align-items:center;
            gap:14px;max-width:920px;margin:0 auto 36px;padding:0 12px
        }

        .book{
            position:relative;width:min(840px,95vw);
            height:clamp(420px,65vh,620px);perspective:1800px;user-select:none
        }

        /* COVER */
        .cover{
            position:absolute;inset:0;border-radius:16px;overflow:hidden;color:#fff;
            display:flex;align-items:center;justify-content:center;text-align:center;
            box-shadow:0 16px 40px rgba(0,0,0,.18), 0 2px 0 rgba(0,0,0,.25) inset;
            background:
                    radial-gradient(1200px 600px at 80% -20%, rgba(255,255,255,.12) 0%, rgba(255,255,255,0) 60%),
                    linear-gradient(135deg,var(--leather1),var(--leather2));
            isolation:isolate;z-index:2000;
        }

        .spine{
            position:absolute;left:0;top:0;bottom:0;width:42px;background:
                linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,0)),
                linear-gradient(180deg,#0c1426,#0a1020 35%,#0a0f1e);
            box-shadow:inset -6px 0 16px rgba(0,0,0,.35);
        }

        .elastic{
            position:absolute;right:64px;top:-12px;bottom:-12px;width:10px;
            background:linear-gradient(180deg,rgba(255,255,255,.15),rgba(255,255,255,0)), var(--elastic);
            border-radius:12px;box-shadow:inset 0 0 0 2px rgba(0,0,0,.1), 0 6px 18px rgba(0,0,0,.25);
            transform:rotate(-1deg);
        }

        .gilt-frame{
            position:absolute;inset:22px;border-radius:14px;padding:28px;text-align:center;
            background:
                    linear-gradient(165deg,rgba(255,255,255,.08),rgba(255,255,255,0)),
                    radial-gradient(1000px 400px at 80% 0%, rgba(255,255,255,.08), transparent 60%);
            box-shadow:
                    inset 0 0 0 2px rgba(255,255,255,.08),
                    inset 0 0 1px 1px rgba(0,0,0,.45),
                    inset 0 0 0 6px rgba(255,255,255,.04);
        }

        .foil{
            font-size:42px;letter-spacing:.4px;margin:0;
            background:linear-gradient(120deg,#fff 15%, #ffe59a 30%, #f6c453 45%, #fff2b2 60%, #d9a441 75%, #fff 90%);
            -webkit-background-clip:text;background-clip:text;color:transparent;
            text-shadow:0 1px 0 rgba(0,0,0,.2), 0 8px 28px rgba(0,0,0,.35);
        }

        .subtitle{margin:6px 0 0;color:#d1d5db;font-weight:500}

        /* PAGE */

        .kicker{color:var(--muted);font-size:12px;letter-spacing:.4px;text-transform:uppercase}
        .title{margin:.2rem 0 1rem;font-size:22px}

        .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px 18px}
        .label{font-size:12px;color:var(--muted)}
        .value{font-weight:600}

        .back{
            position:absolute;inset:0;background:linear-gradient(135deg,#1f2937,#111827);
            border-radius:16px;color:#d1d5db;display:flex;align-items:center;justify-content:center;
            box-shadow:0 16px 40px rgba(0,0,0,.18);transform:translateZ(-1px)
        }

        .hotspot{position:absolute;top:0;bottom:0;width:25%;z-index:5;cursor:pointer}
        .hotspot.left{left:0} .hotspot.right{right:0}
    </style>
</head>

<body>
<header><h1>Mein Freundebuch</h1></header>

<div class="stage">
    <div class="book" id="book">
        <!-- COVER -->
        <div class="cover" id="cover">
            <div class="spine"></div>
            <div class="elastic"></div>

            <div class="gilt-frame">
                <h2 class="foil">Freundebuch</h2>
                <p class="subtitle">Geschichten, Farben & Lieblingsmomente</p>
            </div>
        </div>

        <!-- BACK PAGE -->
        <div class="back">
            <div>Ende<br>Danke f√ºrs Reinschauen üëã</div>
        </div>

        <!-- CLICK ZONES -->
        <div class="hotspot left" id="hotLeft"></div>
        <div class="hotspot right" id="hotRight"></div>
    </div>

    <div class="controls">
        <button class="btn" id="prevBtn">‚Üê Zur√ºck</button>
        <button class="btn" id="nextBtn">Weiter ‚Üí</button>
    </div>
</div>

<script>
    const el = (t,a={},h='')=>{
        const n=document.createElement(t);
        Object.entries(a).forEach(([k,v])=>n.setAttribute(k,v));
        if(h) n.innerHTML=h;
        return n;
    };

    const fmtDate = iso => {
        if(!iso) return "";
        const [y,m,d] = iso.split("-");
        return `${d}.${m}.${y}`;
    };

    const book=document.getElementById('book');
    const prevBtn=document.getElementById('prevBtn');
    const nextBtn=document.getElementById('nextBtn');
    const hotLeft=document.getElementById('hotLeft');
    const hotRight=document.getElementById('hotRight');
    const cover=document.getElementById('cover');

    let pages=[]; let pageIndex=-1;

    function setState(){
        const coverVisible = (pageIndex < 0);
        cover.style.display = coverVisible ? 'flex' : 'none';

        pages.forEach((p,i)=>{
            p.style.display = coverVisible ? 'none' : 'block';
            p.classList.toggle('active', i===pageIndex);
            p.classList.toggle('flipped', i<pageIndex);
        });
    }

    function goNext(){ if(pageIndex < pages.length){ pageIndex++; setState(); } }
    function goPrev(){ if(pageIndex >= 0){ pageIndex--; setState(); } }

    prevBtn.onclick = goPrev;
    nextBtn.onclick = goNext;
    hotLeft.onclick = goPrev;
    hotRight.onclick = goNext;

    window.onkeydown = e => {
        if(e.key === "ArrowRight") goNext();
        if(e.key === "ArrowLeft") goPrev();
    };

    function makePage(person){
        const html = `
        <div class="kicker">Profil</div>
        <h2 class="title">${person.name ?? ""}</h2>

        <div class="grid">
          <div><div class="label">Alter</div><div class="value">${person.age}</div></div>
          <div><div class="label">Geburtsdatum</div><div class="value">${fmtDate(person.geburtsdatum)}</div></div>
          <div><div class="label">Lieblingsfarbe</div><div class="value">${person.favColor}</div></div>
          <div><div class="label">Hobby</div><div class="value">${person.hobby}</div></div>
          <div><div class="label">Lieblingsessen</div><div class="value">${person.favFood}</div></div>
          <div><div class="label">Traumberuf</div><div class="value">${person.dreamJob}</div></div>
        </div>
      `;
        return el("section", {class:"page"}, html);
    }

    /* üî• WICHTIG: Absoluter Backend-Aufruf */
    fetch("https://webtech-projekt-1-p0l3.onrender.com/seite")
        .then(r => r.json())
        .then(list => {
            list.forEach(person => {
                const page=makePage(person);
                book.appendChild(page);
                pages.push(page);
            });
        })
        .then(()=>setState())
        .catch(err => alert("Fehler: "+err));
</script>

</body>
</html>
