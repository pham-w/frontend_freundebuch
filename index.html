<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Mein Freundebuch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
            sans-serif;
            background: #e5edf7;
        }
        header {
            padding: 16px;
            text-align: center;
            font-weight: 600;
            font-size: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto 40px;
            padding: 0 16px;
        }
        .info {
            margin-bottom: 12px;
            color: #4b5563;
            font-size: 14px;
        }
        .cards {
            display: grid;
            gap: 16px;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        }
        .card {
            background: #fffdf8;
            border-radius: 12px;
            padding: 16px 18px;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.15);
            border: 1px solid #e5e7eb;
        }
        .card h2 {
            margin: 0 0 8px;
            font-size: 20px;
        }
        .row {
            margin: 3px 0;
            font-size: 14px;
        }
        .label {
            color: #6b7280;
            margin-right: 4px;
        }
        .value {
            font-weight: 600;
        }
        .error {
            color: #b91c1c;
            margin-top: 8px;
            font-size: 14px;
        }
    </style>
</head>
<body>
<header>Mein Freundebuch (Frontend â†’ GET /seite)</header>

<div class="container">
    <p class="info" id="status">Lade Daten aus dem Backend â€¦</p>
    <div class="cards" id="profiles"></div>
    <p class="error" id="error" style="display: none"></p>
</div>

<script>
    const profilesEl = document.getElementById("profiles");
    const statusEl = document.getElementById("status");
    const errorEl = document.getElementById("error");

    function formatDate(iso) {
        if (!iso) return "";
        const [y, m, d] = iso.split("-");
        return `${d}.${m}.${y}`;
    }

    function renderProfiles(list) {
        profilesEl.innerHTML = "";
        if (!Array.isArray(list) || list.length === 0) {
            statusEl.textContent = "Keine EintrÃ¤ge gefunden.";
            return;
        }
        statusEl.textContent = `Anzahl EintrÃ¤ge: ${list.length}`;

        list.forEach((p) => {
            const card = document.createElement("article");
            card.className = "card";
            card.innerHTML = `
            <h2>${p.name ?? ""}</h2>
            <div class="row"><span class="label">Alter:</span><span class="value">${
                p.age ?? ""
            }</span></div>
            <div class="row"><span class="label">Geburtsdatum:</span><span class="value">${formatDate(
                p.geburtsdatum
            )}</span></div>
            <div class="row"><span class="label">Lieblingsfarbe:</span><span class="value">${
                p.favColor ?? ""
            }</span></div>
            <div class="row"><span class="label">Hobby:</span><span class="value">${
                p.hobby ?? ""
            }</span></div>
            <div class="row"><span class="label">Lieblingsessen:</span><span class="value">${
                p.favFood ?? ""
            }</span></div>
            <div class="row"><span class="label">Traumberuf:</span><span class="value">${
                p.dreamJob ?? ""
            }</span></div>
          `;
            profilesEl.appendChild(card);
        });
    }

    // ðŸ‘‰ hier wird die GET-Route deines Backends aufgerufen
    fetch("https://webtech-projekt-1-p0l3.onrender.com/seite")
        .then((res) => {
            if (!res.ok) {
                throw new Error("HTTP " + res.status);
            }
            return res.json();
        })
        .then((data) => {
            renderProfiles(data);
        })
        .catch((err) => {
            console.error(err);
            statusEl.textContent = "Fehler beim Laden der Daten.";
            errorEl.style.display = "block";
            errorEl.textContent = err.message;
        });
</script>
</body>
</html>
