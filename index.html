<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Mein Freundebuch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root {
            --bg: #e9eef5;
            --paper: #fffdf8;
            --ink: #111827;
            --muted: #6b7280;
            --leather1: #111827;
            --leather2: #1f2937;
            --accent: #f59e0b;
            --elastic: #0ea5e9;
        }

        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            background: var(--bg);
            color: var(--ink);
        }

        header {
            padding: 18px 16px;
            text-align: center;
            font-weight: 600;
            font-size: 20px;
        }

        .stage {
            max-width: 920px;
            margin: 0 auto 40px;
            padding: 0 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 14px;
        }

        .book {
            position: relative;
            width: min(840px, 95vw);
            height: clamp(420px, 65vh, 620px);
            perspective: 1800px;
            user-select: none;
        }

        /* Cover */
        .cover {
            position: absolute;
            inset: 0;
            border-radius: 16px;
            overflow: hidden;
            color: #f9fafb;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-shadow:
                    0 16px 40px rgba(0, 0, 0, 0.25),
                    0 2px 0 rgba(0, 0, 0, 0.35) inset;
            background:
                    radial-gradient(1200px 600px at 80% -20%, rgba(255,255,255,.12) 0%, rgba(255,255,255,0) 60%),
                    linear-gradient(135deg, var(--leather1), var(--leather2));
            isolation: isolate;
            z-index: 50;
        }

        .spine {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 42px;
            background:
                    linear-gradient(90deg, rgba(255,255,255,.12), rgba(255,255,255,0)),
                    linear-gradient(180deg, #020617, #020617 35%, #020617);
            box-shadow: inset -8px 0 18px rgba(0,0,0,.55);
        }

        .elastic {
            position: absolute;
            right: 64px;
            top: -16px;
            bottom: -16px;
            width: 10px;
            border-radius: 999px;
            background:
                    linear-gradient(180deg, rgba(255,255,255,.3), rgba(255,255,255,0)),
                    var(--elastic);
            box-shadow:
                    inset 0 0 0 2px rgba(0,0,0,.15),
                    0 8px 22px rgba(0,0,0,.4);
            transform: rotate(-1deg);
        }

        .gilt-frame {
            position: absolute;
            inset: 24px;
            border-radius: 14px;
            padding: 28px;
            text-align: center;
            background:
                    linear-gradient(165deg, rgba(255,255,255,.08), rgba(255,255,255,0)),
                    radial-gradient(1000px 400px at 80% 0%, rgba(255,255,255,.08), transparent 60%);
            box-shadow:
                    inset 0 0 0 2px rgba(255,255,255,.1),
                    inset 0 0 1px 1px rgba(0,0,0,.55),
                    inset 0 0 0 6px rgba(255,255,255,.06);
        }

        .foil {
            font-size: 38px;
            margin: 0;
            letter-spacing: .4px;
            background: linear-gradient(
                    120deg,
                    #f9fafb 10%,
                    #ffe59a 30%,
                    #fbbf24 45%,
                    #fef9c3 60%,
                    #d97706 80%,
                    #f9fafb 90%
            );
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow:
                    0 1px 0 rgba(0,0,0,.35),
                    0 10px 28px rgba(0,0,0,.45);
        }

        .subtitle {
            margin-top: 8px;
            color: #e5e7eb;
            font-size: 14px;
        }

        .chip {
            display: inline-block;
            margin-top: 12px;
            padding: 6px 12px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: .3px;
            text-transform: uppercase;
            border: 1px solid rgba(255,255,255,.3);
            background: rgba(15,23,42,.35);
            color: #f9fafb;
        }

        /* Seiten */
        .page {
            position: absolute;
            inset: 10px;
            background: var(--paper);
            border-radius: 12px;
            padding: 26px 28px;
            box-shadow:
                    0 18px 36px rgba(15,23,42,.2),
                    0 0 0 1px rgba(15,23,42,.25);
            transform-origin: left center;
            transform: rotateY(0deg);
            transition: transform .7s cubic-bezier(.2,.7,.1,1),
            box-shadow .7s;
            backface-visibility: hidden;
            background-image:
                    linear-gradient(to right, rgba(0,0,0,.06), rgba(0,0,0,0) 40%),
                    repeating-linear-gradient(#0000, #0000 18px, rgba(15,23,42,.04) 19px, #0000 20px);
            overflow: hidden;
            z-index: 1;
        }

        .page.flipped {
            transform: rotateY(-180deg);
            box-shadow: 0 10px 20px rgba(15,23,42,.15);
        }

        .kicker {
            font-size: 11px;
            letter-spacing: .25em;
            text-transform: uppercase;
            color: var(--muted);
        }

        .title {
            margin: .3rem 0 1.2rem;
            font-size: 24px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 10px 18px;
        }

        .label {
            font-size: 12px;
            color: var(--muted);
            margin-bottom: 2px;
        }

        .value {
            font-size: 14px;
            font-weight: 600;
        }

        .footer {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 14px;
            text-align: center;
            font-size: 11px;
            color: var(--muted);
        }

        .back {
            position: absolute;
            inset: 0;
            border-radius: 16px;
            background: linear-gradient(135deg, #020617, #111827);
            box-shadow: 0 16px 40px rgba(15,23,42,.35);
            color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translateZ(-1px);
        }

        .back-inner {
            text-align: center;
            font-size: 14px;
        }

        .controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn {
            border: 0;
            border-radius: 999px;
            padding: 9px 14px;
            background: #111827;
            color: #f9fafb;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(15,23,42,.3);
        }

        .btn[disabled] {
            opacity: .4;
            cursor: default;
            box-shadow: none;
        }

        .hint {
            font-size: 11px;
            color: var(--muted);
            text-align: center;
            margin-top: 4px;
        }

        .hotspot {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 25%;
            z-index: 30;
            cursor: pointer;
        }
        .hotspot.left { left: 0; }
        .hotspot.right { right: 0; }

        @media (max-width: 700px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .hotspot {
                width: 35%;
            }
        }
    </style>
</head>
<body>
<header>Mein Freundebuch</header>

<div class="stage">
    <div class="book" id="book">
        <!-- Cover -->
        <section class="cover" id="cover">
            <div class="spine" aria-hidden="true"></div>
            <div class="elastic" aria-hidden="true"></div>
            <div class="gilt-frame">
                <h2 class="foil">Freundebuch</h2>
                <p class="subtitle">Geschichten, Farben &amp; Lieblingsmomente</p>
                <div class="chip">Zum Bl√§ttern klicken oder Pfeiltasten nutzen</div>
            </div>
        </section>

        <!-- R√ºckseite -->
        <section class="back">
            <div class="back-inner">
                <div class="kicker">Ende</div>
                <div>Danke f√ºrs Reinschauen üëã</div>
            </div>
        </section>

        <!-- Klick-Zonen -->
        <div class="hotspot left" id="hotLeft" aria-label="Zur√ºck bl√§ttern"></div>
        <div class="hotspot right" id="hotRight" aria-label="Weiter bl√§ttern"></div>
    </div>

    <div class="controls">
        <button class="btn" id="prevBtn">‚Üê Zur√ºck</button>
        <button class="btn" id="nextBtn">Weiter ‚Üí</button>
    </div>
    <div class="hint" id="status">Lade Eintr√§ge aus dem Backend ‚Ä¶</div>
</div>

<script>
    const book = document.getElementById("book");
    const cover = document.getElementById("cover");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const hotLeft = document.getElementById("hotLeft");
    const hotRight = document.getElementById("hotRight");
    const statusEl = document.getElementById("status");

    const pages = [];
    let pageIndex = -1; // -1 = Cover sichtbar

    function fmtDate(iso) {
        if (!iso) return "";
        const [y, m, d] = iso.split("-");
        return d + "." + m + "." + y;
    }

    function makePage(person) {
        const html = `
      <div class="kicker">Profil</div>
      <h2 class="title">${person.name ?? ""}</h2>
      <div class="grid">
        <div>
          <div class="label">Alter</div>
          <div class="value">${person.age ?? ""}</div>
        </div>
        <div>
          <div class="label">Geburtsdatum</div>
          <div class="value">${fmtDate(person.geburtsdatum)}</div>
        </div>
        <div>
          <div class="label">Lieblingsfarbe</div>
          <div class="value">${person.favColor ?? ""}</div>
        </div>
        <div>
          <div class="label">Hobby</div>
          <div class="value">${person.hobby ?? ""}</div>
        </div>
        <div>
          <div class="label">Lieblingsessen</div>
          <div class="value">${person.favFood ?? ""}</div>
        </div>
        <div>
          <div class="label">Traumberuf</div>
          <div class="value">${person.dreamJob ?? ""}</div>
        </div>
      </div>
      <div class="footer">Seite</div>
    `;
        const page = document.createElement("section");
        page.className = "page";
        page.innerHTML = html;
        page.style.zIndex = 40 - pages.length;
        return page;
    }

    function setState() {
        const coverVisible = pageIndex < 0;
        cover.style.display = coverVisible ? "flex" : "none";

        pages.forEach((p, i) => {
            p.style.display = coverVisible ? "none" : "block";
            p.classList.toggle("flipped", i < pageIndex);
        });

        prevBtn.disabled = pageIndex < 0;
        nextBtn.disabled = pageIndex >= pages.length - 1;
    }

    function goNext() {
        if (pageIndex < pages.length - 1) {
            pageIndex++;
            setState();
        }
    }

    function goPrev() {
        if (pageIndex >= 0) {
            pageIndex--;
            setState();
        }
    }

    prevBtn.addEventListener("click", goPrev);
    nextBtn.addEventListener("click", goNext);
    hotLeft.addEventListener("click", goPrev);
    hotRight.addEventListener("click", goNext);
    window.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight") goNext();
        if (e.key === "ArrowLeft") goPrev();
    });

    // üî• Daten aus deinem Backend holen
    fetch("https://webtech-projekt-1-p0l3.onrender.com/seite")
        .then((res) => {
            if (!res.ok) throw new Error("HTTP " + res.status);
            return res.json();
        })
        .then((list) => {
            if (!Array.isArray(list)) list = [list];
            statusEl.textContent = "Anzahl Eintr√§ge: " + list.length;

            list.forEach((person) => {
                const page = makePage(person);
                book.appendChild(page);
                pages.push(page);
            });

            pageIndex = -1;
            setState();
        })
        .catch((err) => {
            console.error(err);
            statusEl.textContent = "Fehler beim Laden der Daten: " + err.message;
        });
</script>
</body>
</html>
